{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Asus/Desktop/Tomato/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Tag } from 'src/app/shared/models/Tag';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../food/food.service\";\nexport class TagsService {\n  constructor(foodService) {\n    this.foodService = foodService;\n    this.foodItems = [];\n    this.tagMap = new Map();\n    this.tags = [];\n    this.tagNames = ['All', 'NonVeg', 'Veg', 'South Indian', 'Birthday'];\n  }\n\n  ngOnInit() {\n    this.getAllTags();\n  }\n\n  getAllTags() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      // Admins will allow some mostly searched tags: eg show the mostly searched 5 tags\n      // Solely on the discretionary of the admins:\n      yield _this.foodService.getAllFoodItemsSync().then(resp => {\n        _this.foodItems = resp;\n      });\n      console.log(_this.foodItems);\n\n      for (let food of _this.foodItems) {\n        for (let tag of food.tags) {\n          // console.log(tag);\n          let val = _this.tagMap.get(tag);\n\n          if (val == undefined || val == null) val = 0;\n\n          _this.tagMap.set(tag.toLowerCase(), val + 1);\n        }\n      }\n\n      console.log(_this.tagMap);\n\n      for (let tagName of _this.tagNames) {\n        let tag = new Tag();\n        tag['name'] = tagName;\n\n        let tagCount = _this.tagMap.get(tagName.toLowerCase().trim());\n\n        if (tagCount == null || tagCount == undefined) tagCount = 0;\n        tag['count'] = tagCount;\n        if (tagCount > 0) _this.tags.push(tag);\n      }\n\n      console.log(_this.tags);\n      return _this.tags; // return [\n      //   { name: 'All', count: 8 },\n      //   { name: 'NonVeg', count: 2 },\n      //   { name: 'Veg', count: 2 },\n      //   { name: 'South Indian', count: 1 },\n      //   { name: 'Birthday', count: 2 }\n      // ];\n    })();\n  }\n\n}\n\nTagsService.ɵfac = function TagsService_Factory(t) {\n  return new (t || TagsService)(i0.ɵɵinject(i1.FoodService));\n};\n\nTagsService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: TagsService,\n  factory: TagsService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":";AACA,SAASA,GAAT,QAAoB,2BAApB;;;AAOA,OAAM,MAAOC,WAAP,CAAkB;EAEtBC,YAAoBC,WAApB,EAA6C;IAAzB;IACpB,iBAAmB,EAAnB;IACA,cAAQ,IAAIC,GAAJ,EAAR;IACA,YAAY,EAAZ;IACA,gBAAmB,CAAC,KAAD,EAAO,QAAP,EAAgB,KAAhB,EAAsB,cAAtB,EAAqC,UAArC,CAAnB;EAJkD;;EAKlDC,QAAQ;IACN,KAAKC,UAAL;EACD;;EAEKA,UAAU;IAAA;;IAAA;MACd;MACA;MACA,MAAM,KAAI,CAACH,WAAL,CAAiBI,mBAAjB,GAAuCC,IAAvC,CAA6CC,IAAD,IAAQ;QACxD,KAAI,CAACC,SAAL,GAAeD,IAAf;MACD,CAFK,CAAN;MAIAE,OAAO,CAACC,GAAR,CAAY,KAAI,CAACF,SAAjB;;MAEA,KAAI,IAAIG,IAAR,IAAgB,KAAI,CAACH,SAArB,EAA+B;QAC7B,KAAI,IAAII,GAAR,IAAeD,IAAI,CAACE,IAApB,EAAyB;UACvB;UACA,IAAIC,GAAG,GAAE,KAAI,CAACC,MAAL,CAAYC,GAAZ,CAAgBJ,GAAhB,CAAT;;UACA,IAAGE,GAAG,IAAEG,SAAL,IAAkBH,GAAG,IAAE,IAA1B,EAA+BA,GAAG,GAAC,CAAJ;;UAC/B,KAAI,CAACC,MAAL,CAAYG,GAAZ,CAAgBN,GAAG,CAACO,WAAJ,EAAhB,EAAmCL,GAAG,GAAC,CAAvC;QACD;MACF;;MACDL,OAAO,CAACC,GAAR,CAAY,KAAI,CAACK,MAAjB;;MACA,KAAI,IAAIK,OAAR,IAAmB,KAAI,CAACC,QAAxB,EAAiC;QAC/B,IAAIT,GAAG,GAAC,IAAId,GAAJ,EAAR;QACAc,GAAG,CAAC,MAAD,CAAH,GAAYQ,OAAZ;;QACA,IAAIE,QAAQ,GAAC,KAAI,CAACP,MAAL,CAAYC,GAAZ,CAAgBI,OAAO,CAACD,WAAR,GAAsBI,IAAtB,EAAhB,CAAb;;QACA,IAAGD,QAAQ,IAAE,IAAV,IAAkBA,QAAQ,IAAEL,SAA/B,EAAyCK,QAAQ,GAAC,CAAT;QACzCV,GAAG,CAAC,OAAD,CAAH,GAAaU,QAAb;QAEA,IAAGA,QAAQ,GAAC,CAAZ,EAAc,KAAI,CAACT,IAAL,CAAUW,IAAV,CAAeZ,GAAf;MACf;;MACDH,OAAO,CAACC,GAAR,CAAY,KAAI,CAACG,IAAjB;MAEA,OAAO,KAAI,CAACA,IAAZ,CA7Bc,CA8Bd;MACA;MACA;MACA;MACA;MACA;MACA;IApCc;EAqCf;;AAhDqB;;;mBAAXd,aAAW0B;AAAA;;;SAAX1B;EAAW2B,SAAX3B,WAAW;EAAA4B,YAFV","names":["Tag","TagsService","constructor","foodService","Map","ngOnInit","getAllTags","getAllFoodItemsSync","then","resp","foodItems","console","log","food","tag","tags","val","tagMap","get","undefined","set","toLowerCase","tagName","tagNames","tagCount","trim","push","i0","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\Asus\\Desktop\\Tomato\\src\\app\\services\\tags\\tags.service.ts"],"sourcesContent":["import { Injectable, OnInit } from '@angular/core';\nimport { Tag } from 'src/app/shared/models/Tag';\nimport { FoodService } from '../food/food.service';\nimport { Food } from 'src/app/shared/models/food';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TagsService implements OnInit{\n\n  constructor(private foodService : FoodService) { }\n  foodItems:Food[] = [];\n  tagMap =new Map<string, number>();\n  tags: Tag[]=[];\n  tagNames: string[]=['All','NonVeg','Veg','South Indian','Birthday'];\n  ngOnInit(): void {\n    this.getAllTags();\n  }\n\n  async getAllTags(){\n    // Admins will allow some mostly searched tags: eg show the mostly searched 5 tags\n    // Solely on the discretionary of the admins:\n    await this.foodService.getAllFoodItemsSync().then((resp)=>{\n      this.foodItems=resp;\n    })\n\n    console.log(this.foodItems);\n    \n    for(let food of this.foodItems){\n      for(let tag of food.tags){\n        // console.log(tag);\n        let val= this.tagMap.get(tag);\n        if(val==undefined || val==null)val=0;\n        this.tagMap.set(tag.toLowerCase(), val+1);\n      }\n    }\n    console.log(this.tagMap);\n    for(let tagName of this.tagNames){\n      let tag=new Tag();\n      tag['name']=tagName;\n      let tagCount=this.tagMap.get(tagName.toLowerCase().trim());\n      if(tagCount==null || tagCount==undefined)tagCount=0;\n      tag['count']=tagCount;\n\n      if(tagCount>0)this.tags.push(tag);\n    }\n    console.log(this.tags);\n    \n    return this.tags;\n    // return [\n    //   { name: 'All', count: 8 },\n    //   { name: 'NonVeg', count: 2 },\n    //   { name: 'Veg', count: 2 },\n    //   { name: 'South Indian', count: 1 },\n    //   { name: 'Birthday', count: 2 }\n    // ];\n  }\n}\n"]},"metadata":{},"sourceType":"module"}